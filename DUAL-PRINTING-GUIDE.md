# ๐จ๏ธ ุฏููู ูุธุงู ุงูุทุจุงุนุฉ ุงููุฒุฏูุฌุฉ

## ูุธุฑุฉ ุนุงูุฉ

ูุธุงู ุทุจุงุนุฉ ูุฒุฏูุฌ ูููู ุจุทุจุงุนุฉ ูุณุฎุชูู ูุฎุชููุชูู ูู ุงููุงุชูุฑุฉ ุชููุงุฆูุงู:
- **ูุงุชูุฑุฉ ุงููุงุดูุฑ**: ูุงุชูุฑุฉ ูุงููุฉ ุจุฌููุน ุงูุชูุงุตูู ูุงูุฃุณุนุงุฑ
- **ุทูุจ ุงูุจุงุฑ**: ุทูุจ ุชุญุถูุฑ ุจุฏูู ุฃุณุนุงุฑ (ููุท ุงูุฃุตูุงู ูุงูููุงุญุธุงุช)

---

## ๐ ุงููููุงุช ุงููุถุงูุฉ

### 1. ูููุงุช HTML
- `cashier-receipt.html` - ูุงูุจ ูุงุชูุฑุฉ ุงููุงุดูุฑ
- `bar-receipt.html` - ูุงูุจ ุทูุจ ุงูุจุงุฑ
- `test-print.html` - ุตูุญุฉ ุงุฎุชุจุงุฑ ุงููุธุงู

### 2. ูููุงุช JavaScript
- `print-receipts.js` - ูุธุงู ุงูุทุจุงุนุฉ ุงูุฑุฆูุณู

### 3. ูููุงุช CSS
- `print-receipt.css` - ุชุตููู ุงูุทุจุงุนุฉ ุงูุญุฑุงุฑูุฉ (80mm)

### 4. ุงููููุงุช ุงููุนุฏูุฉ
- `pos.html` - ุฅุถุงูุฉ ุณูุฑูุจุช print-receipts.js
- `pos.js` - ุชุนุฏูู ุฏุงูุฉ printReceipt() ูุงุณุชุฎุฏุงู ุงููุธุงู ุงูุฌุฏูุฏ

---

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### ูููุณุชุฎุฏู ุงูููุงุฆู:

1. **ูู ูุธุงู ุงููุงุดูุฑ (pos.html):**
   - ุฃููู ุงูุทูุจ ูุงููุนุชุงุฏ
   - ุงุถุบุท ุนูู ุฒุฑ "๐จ๏ธ ุทุจุงุนุฉ"
   - ุณูุชู ุทุจุงุนุฉ ูุงุชูุฑุฉ ุงููุงุดูุฑ ุฃููุงู
   - ุจุนุฏ 2 ุซุงููุฉุ ุณูุชู ุทุจุงุนุฉ ุทูุจ ุงูุจุงุฑ ุชููุงุฆูุงู

2. **ููุงุฎุชุจุงุฑ:**
   - ุงูุชุญ `test-print.html` ูู ุงููุชุตูุญ
   - ุงุถุบุท ุนูู ุฃู ุฒุฑ ููุงุฎุชุจุงุฑ
   - ุชุญูู ูู ุงูููุงุชูุฑ ุงููุทุจูุนุฉ

### ูููุทูุฑ:

```javascript
// ุงุณุชุฎุฏุงู ุงููุธุงู ูู ุฃู ุตูุญุฉ
printReceipts(orderData);

// ุทุจุงุนุฉ ูุงุชูุฑุฉ ุงููุงุดูุฑ ููุท
printCashierReceipt(orderData);

// ุทุจุงุนุฉ ุทูุจ ุงูุจุงุฑ ููุท
printBarReceipt(orderData);

// ุงุฎุชุจุงุฑ ุจุฏูู ุจูุงูุงุช ุญููููุฉ
testPrintReceipts();
```

---

## ๐ ูููู ุงูุจูุงูุงุช ุงููุทููุจ

```javascript
const orderData = {
    orderNumber: '0001',        // ุฑูู ุงูุทูุจ
    tableName: 'ุทุงููุฉ 5',       // ุงุณู ุงูุทุงููุฉ
    cashier: 'ูุฏู',             // ุงุณู ุงููุงุดูุฑ
    items: [                     // ูุงุฆูุฉ ุงูุฃุตูุงู
        {
            name: 'ูุงุจุชุดููู',
            quantity: 2,
            price: 14.00,
            total: 28.00,
            options: 'ุณูุฑ ูุณุท'  // ุงุฎุชูุงุฑู
        }
    ],
    subtotal: 55.00,            // ุงูุฅุฌูุงูู ุงููุฑุนู
    tax: 7.70,                  // ุงูุถุฑูุจุฉ
    discount: 0,                // ุงูุฎุตู (ุงุฎุชูุงุฑู)
    total: 62.70,               // ุงูุฅุฌูุงูู ุงูููุงุฆู
    paymentMethod: 'cash',      // ุทุฑููุฉ ุงูุฏูุน
    completedAt: '2024-01-15T14:30:00'  // ุชุงุฑูุฎ ูููุช ุงูุทูุจ
};
```

---

## ๐ง ุงูุชุทููุฑ ุงููุณุชูุจูู

### ุงููุฑุญูุฉ 1: ุฏุนู QZ Tray (ุฃููููุฉ ุนุงููุฉ)

**ุงููุฏู:** ุฅุถุงูุฉ ุฏุนู QZ Tray ููุทุจุงุนุฉ ุงููุจุงุดุฑุฉ ุนูู ุทุงุจุนุงุช ูุญุฏุฏุฉ

**ุงูุฎุทูุงุช:**

1. **ุชุซุจูุช QZ Tray:**
   ```html
   <!-- ุฅุถุงูุฉ ูู pos.html -->
   <script src="https://cdn.jsdelivr.net/npm/qz-tray@2.2.0/qz-tray.min.js"></script>
   ```

2. **ุฅูุดุงุก ููู qz-tray-handler.js:**
   ```javascript
   class QZTrayHandler {
       async connect() {
           // ุงูุงุชุตุงู ุจู QZ Tray
       }
       
       async getPrinters() {
           // ุฌูุจ ูุงุฆูุฉ ุงูุทุงุจุนุงุช
       }
       
       async print(printerName, htmlContent) {
           // ุงูุทุจุงุนุฉ ุนูู ุทุงุจุนุฉ ูุญุฏุฏุฉ
       }
   }
   ```

3. **ุชุนุฏูู print-receipts.js:**
   ```javascript
   // ุงุณุชุจุฏุงู window.open() ุจู QZ Tray
   if (qzTrayAvailable) {
       await qzHandler.print(cashierPrinter, htmlContent);
   } else {
       // Fallback to window.print()
   }
   ```

**ุงููููุงุช ุงููุทููุจุฉ:**
- `js/qz-tray-handler.js` - ูุนุงูุฌ QZ Tray
- `settings-printers.html` - ุตูุญุฉ ุฅุนุฏุงุฏุงุช ุงูุทุงุจุนุงุช

**ุงูููุช ุงููุชููุน:** 2-3 ุฃูุงู

---

### ุงููุฑุญูุฉ 2: ุฅุนุฏุงุฏุงุช ุงูุทุงุจุนุงุช (ุฃููููุฉ ุนุงููุฉ)

**ุงููุฏู:** ุงูุณูุงุญ ูููุณุชุฎุฏู ุจุงุฎุชูุงุฑ ุทุงุจุนุฉ ูููุตูุฉ ููู ููุน

**ุงูุฎุทูุงุช:**

1. **ุฅุถุงูุฉ ูุณู ูู settings.html:**
   ```html
   <div class="printer-settings">
       <h2>๐จ๏ธ ุฅุนุฏุงุฏุงุช ุงูุทุงุจุนุงุช</h2>
       
       <label>ุทุงุจุนุฉ ุงููุงุดูุฑ:</label>
       <select id="cashierPrinter">
           <!-- ูุงุฆูุฉ ุงูุทุงุจุนุงุช -->
       </select>
       
       <label>ุทุงุจุนุฉ ุงูุจุงุฑ:</label>
       <select id="barPrinter">
           <!-- ูุงุฆูุฉ ุงูุทุงุจุนุงุช -->
       </select>
       
       <button onclick="savePrinterSettings()">ุญูุธ</button>
   </div>
   ```

2. **ุญูุธ ุงูุฅุนุฏุงุฏุงุช ูู localStorage:**
   ```javascript
   const printerSettings = {
       cashier: 'HP LaserJet Pro',
       bar: 'Epson TM-T20',
       type: {
           cashier: 'thermal',  // or 'a4'
           bar: 'thermal'
       }
   };
   localStorage.setItem('printerSettings', JSON.stringify(printerSettings));
   ```

3. **ุงุณุชุฎุฏุงู ุงูุฅุนุฏุงุฏุงุช ูู ุงูุทุจุงุนุฉ:**
   ```javascript
   const settings = JSON.parse(localStorage.getItem('printerSettings'));
   await qzHandler.print(settings.cashier, cashierHTML);
   await qzHandler.print(settings.bar, barHTML);
   ```

**ุงููููุงุช ุงููุทููุจุฉ:**
- ุชุนุฏูู `settings.html`
- ุชุนุฏูู `settings.js`
- ุฅูุดุงุก `js/printer-settings.js`

**ุงูููุช ุงููุชููุน:** 1-2 ููู

---

### ุงููุฑุญูุฉ 3: ุฎูุงุฑุงุช ุงูุทุจุงุนุฉ ุงููุชูุฏูุฉ (ุฃููููุฉ ูุชูุณุทุฉ)

**ุงููุฏู:** ุฅุถุงูุฉ ุฎูุงุฑุงุช ุชุญูู ูู ุณููู ุงูุทุจุงุนุฉ

**ุงูุฎูุงุฑุงุช ุงูููุชุฑุญุฉ:**

1. **ูุถุน ุงูุทุจุงุนุฉ:**
   - ุทุจุงุนุฉ ุงููุงุชูุฑุชูู ูุนุงู (ุงูุชุฑุงุถู)
   - ุทุจุงุนุฉ ูุงุชูุฑุฉ ุงููุงุดูุฑ ููุท
   - ุทุจุงุนุฉ ุทูุจ ุงูุจุงุฑ ููุท

2. **ุงูุทุจุงุนุฉ ุงูุชููุงุฆูุฉ:**
   - ุชูุนูู/ุชุนุทูู ุงูุทุจุงุนุฉ ุงูุชููุงุฆูุฉ ุจุนุฏ ุฅุชูุงู ุงูุทูุจ
   - ุชุฃุฎูุฑ ุฒููู ูุงุจู ููุชุนุฏูู (ุญุงููุงู 2 ุซุงููุฉ)

3. **ูุนุงููุฉ ูุจู ุงูุทุจุงุนุฉ:**
   - ุฅุธูุงุฑ ูุนุงููุฉ ุงููุงุชูุฑุฉ ูุจู ุงูุทุจุงุนุฉ

**ุงูุชูููุฐ:**
```javascript
const printOptions = {
    mode: 'both',           // 'both', 'cashier', 'bar'
    autoPrint: true,
    delay: 2000,            // milliseconds
    preview: false
};
```

**ุงูููุช ุงููุชููุน:** 1 ููู

---

### ุงููุฑุญูุฉ 4: ุฑูุน ุงูุดุนุงุฑ (ุฃููููุฉ ูุชูุณุทุฉ)

**ุงููุฏู:** ุงูุณูุงุญ ูููุณุชุฎุฏู ุจุฑูุน ุดุนุงุฑ ุงููููู

**ุงูุฎุทูุงุช:**

1. **ุฅุถุงูุฉ ูู settings.html:**
   ```html
   <div class="logo-upload">
       <h3>ุดุนุงุฑ ุงููููู</h3>
       <input type="file" id="logoUpload" accept="image/*">
       <img id="logoPreview" src="" alt="Logo Preview">
       <button onclick="removeLogo()">ุฅุฒุงูุฉ ุงูุดุนุงุฑ</button>
   </div>
   ```

2. **ูุนุงูุฌุฉ ุงูุตูุฑุฉ:**
   ```javascript
   async function handleLogoUpload(file) {
       const reader = new FileReader();
       reader.onload = function(e) {
           const base64 = e.target.result;
           localStorage.setItem('shopLogo', base64);
       };
       reader.readAsDataURL(file);
   }
   ```

3. **ุงุณุชุฎุฏุงู ุงูุดุนุงุฑ ูู ุงูููุงุชูุฑ:**
   ```javascript
   const logo = localStorage.getItem('shopLogo');
   if (logo) {
       document.querySelector('.logo img').src = logo;
   }
   ```

**ุงูููุช ุงููุชููุน:** ูุตู ููู

---

### ุงููุฑุญูุฉ 5: ุณุฌู ุงูุทุจุงุนุฉ (ุฃููููุฉ ููุฎูุถุฉ)

**ุงููุฏู:** ุญูุธ ุณุฌู ุจุฌููุน ุนูููุงุช ุงูุทุจุงุนุฉ

**ุงูุฎุทูุงุช:**

1. **ุฅูุดุงุก print-logger.js:**
   ```javascript
   function logPrintAttempt(data) {
       const history = JSON.parse(localStorage.getItem('printHistory')) || [];
       history.push({
           timestamp: new Date().toISOString(),
           orderNumber: data.orderNumber,
           type: data.type,  // 'cashier' or 'bar'
           success: data.success,
           error: data.error || null
       });
       localStorage.setItem('printHistory', JSON.stringify(history));
   }
   ```

2. **ุนุฑุถ ุงูุณุฌู ูู ุงูุชูุงุฑูุฑ:**
   - ุฅุถุงูุฉ ูุณู ูู reports.html
   - ุนุฑุถ ุขุฎุฑ 50 ุนูููุฉ ุทุจุงุนุฉ
   - ุฅููุงููุฉ ุฅุนุงุฏุฉ ุงูุทุจุงุนุฉ ูู ุงูุณุฌู

**ุงูููุช ุงููุชููุน:** 1 ููู

---

### ุงููุฑุญูุฉ 6: ุฅุนุงุฏุฉ ุงูุทุจุงุนุฉ (ุฃููููุฉ ูุชูุณุทุฉ)

**ุงููุฏู:** ุฅููุงููุฉ ุฅุนุงุฏุฉ ุทุจุงุนุฉ ุฃู ูุงุชูุฑุฉ ุณุงุจูุฉ

**ุงูุฎุทูุงุช:**

1. **ุฅุถุงูุฉ ุฒุฑ ูู reports.html:**
   ```html
   <button onclick="reprintOrder(orderId)">
       <i class="fas fa-redo"></i> ุฅุนุงุฏุฉ ุทุจุงุนุฉ
   </button>
   ```

2. **ุฏุงูุฉ ุฅุนุงุฏุฉ ุงูุทุจุงุนุฉ:**
   ```javascript
   async function reprintOrder(orderId) {
       // ุฌูุจ ุจูุงูุงุช ุงูุทูุจ
       const order = getOrderById(orderId);
       
       // ุฅุถุงูุฉ ุนูุงูุฉ "ูุณุฎุฉ ููุฑุฑุฉ"
       order.isDuplicate = true;
       
       // ุทุจุงุนุฉ
       await printReceipts(order);
   }
   ```

3. **ุชุนุฏูู ุงูููุงูุจ:**
   - ุฅุถุงูุฉ ูุต "ูุณุฎุฉ ููุฑุฑุฉ - DUPLICATE" ุฅุฐุง ูุงูุช ุฅุนุงุฏุฉ ุทุจุงุนุฉ

**ุงูููุช ุงููุชููุน:** ูุตู ููู

---

### ุงููุฑุญูุฉ 7: ุฏุนู ุงูุทุงุจุนุงุช ุงูุนุงุฏูุฉ A4 (ุฃููููุฉ ููุฎูุถุฉ)

**ุงููุฏู:** ุฏุนู ุงูุทุจุงุนุฉ ุนูู ุทุงุจุนุงุช A4 ุงูุนุงุฏูุฉ

**ุงูุฎุทูุงุช:**

1. **ุฅุถุงูุฉ media query ูู print-receipt.css:**
   ```css
   @media print and (min-width: 210mm) {
       body {
           width: 210mm;
           padding: 10mm;
       }
       /* ุชูุจูุฑ ุงูุฎุทูุท ูุงููุณุงูุงุช */
   }
   ```

2. **ุงุฎุชูุงุฑ ููุน ุงูุทุงุจุนุฉ ูู ุงูุฅุนุฏุงุฏุงุช:**
   ```javascript
   printerSettings.type = {
       cashier: 'a4',      // or 'thermal'
       bar: 'thermal'
   };
   ```

**ุงูููุช ุงููุชููุน:** ูุตู ููู

---

## ๐ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุงูุดุงุฆุนุฉ

### 1. ุงูููุงูุฐ ุงูููุจุซูุฉ ูุญุธูุฑุฉ

**ุงููุดููุฉ:** ุงููุชุตูุญ ูููุน ูุชุญ ุงูููุงูุฐ ุงูููุจุซูุฉ

**ุงูุญู:**
```javascript
if (!printWindow) {
    Swal.fire({
        icon: 'warning',
        title: 'ุชูุจูู',
        text: 'ูุฑุฌู ุงูุณูุงุญ ุจุงูููุงูุฐ ุงูููุจุซูุฉ ููุฐุง ุงููููุน',
        confirmButtonText: 'ุญุณูุงู'
    });
}
```

### 2. QZ Tray ุบูุฑ ูุซุจุช

**ุงููุดููุฉ:** QZ Tray ุบูุฑ ูุซุจุช ุนูู ุงูุฌูุงุฒ

**ุงูุญู:**
```javascript
if (!qzTrayAvailable) {
    Swal.fire({
        icon: 'info',
        title: 'QZ Tray ุบูุฑ ูุชููุฑ',
        html: `
            <p>ููุทุจุงุนุฉ ุงููุจุงุดุฑุฉุ ูุฑุฌู ุชุญููู ูุชุซุจูุช QZ Tray</p>
            <a href="https://qz.io/download/" target="_blank">ุชุญููู QZ Tray</a>
        `,
        showCancelButton: true,
        confirmButtonText: 'ุงุณุชุฎุฏุงู ุงูุทุจุงุนุฉ ุงูุนุงุฏูุฉ',
        cancelButtonText: 'ุฅูุบุงุก'
    });
}
```

### 3. ุงูุทุงุจุนุฉ ุบูุฑ ูุชุตูุฉ

**ุงููุดููุฉ:** ุงูุทุงุจุนุฉ ุงููุญุฏุฏุฉ ุบูุฑ ูุชุตูุฉ

**ุงูุญู:**
```javascript
try {
    await qzHandler.print(printerName, content);
} catch (error) {
    Swal.fire({
        icon: 'error',
        title: 'ุฎุทุฃ ูู ุงูุทุจุงุนุฉ',
        text: 'ุงูุทุงุจุนุฉ ุบูุฑ ูุชุตูุฉ. ูุฑุฌู ุงูุชุญูู ูู ุงูุงุชุตุงู',
        showCancelButton: true,
        confirmButtonText: 'ุฅุนุงุฏุฉ ุงููุญุงููุฉ',
        cancelButtonText: 'ุฅูุบุงุก'
    });
}
```

---

## ๐ ููุงุญุธุงุช ูููุฉ

### ูููุทูุฑูู:

1. **ุงูููุฏ ุงูุญุงูู:**
   - โ ูุณุฎุฉ Demo ุชุนูู ุจู window.print()
   - โ ุฌุงูุฒ ููุชุทููุฑ ูุงูุชูุณุน
   - โ ุชุนูููุงุช TODO ูู ุงูุฃูุงูู ุงููููุฉ

2. **ุงูุชูุงูู:**
   - โ ูุนูู ุนูู ุฌููุน ุงููุชุตูุญุงุช ุงูุญุฏูุซุฉ
   - โ ูุชูุงูู ูุน Windows
   - โ๏ธ ูุญุชุงุฌ QZ Tray ููุทุจุงุนุฉ ุงููุจุงุดุฑุฉ

3. **ุงูุฃุฏุงุก:**
   - โ ุณุฑูุน ูุฎููู
   - โ ูุง ูุคุซุฑ ุนูู ุฃุฏุงุก ุงููุธุงู
   - โ ูุนูู ุจุฏูู ุงุชุตุงู ุจุงูุฅูุชุฑูุช

### ูููุณุชุฎุฏููู:

1. **ุงููุชุทูุจุงุช:**
   - ูุชุตูุญ ุญุฏูุซ (Chrome, Edge, Firefox)
   - ุงูุณูุงุญ ุจุงูููุงูุฐ ุงูููุจุซูุฉ
   - ุทุงุจุนุฉ ูุชุตูุฉ ุจุงูุฌูุงุฒ

2. **ูุตุงุฆุญ:**
   - ุงุฎุชุจุฑ ุงูุทุจุงุนุฉ ูุจู ุงูุงุณุชุฎุฏุงู ุงููุนูู
   - ุชุฃูุฏ ูู ุฅุนุฏุงุฏุงุช ุงูุทุงุจุนุฉ (ุญุฌู ุงููุฑู)
   - ุงุญุชูุธ ุจูุณุฎุฉ ุงุญุชูุงุทูุฉ ูู ุงูุฅุนุฏุงุฏุงุช

---

## ๐ ุฑูุงุจุท ูููุฏุฉ

- [QZ Tray Documentation](https://qz.io/docs/)
- [QZ Tray Download](https://qz.io/download/)
- [Print.js Documentation](https://printjs.crabbly.com/)
- [CSS Print Styles Guide](https://www.smashingmagazine.com/2018/05/print-stylesheets-in-2018/)

---

## ๐ ุงูุฏุนู

ูููุณุงุนุฏุฉ ุฃู ุงูุงุณุชูุณุงุฑุงุช:
- ุฑุงุฌุน ููู `test-print.html` ููุงุฎุชุจุงุฑ
- ุชุญูู ูู console.log ููุฃุฎุทุงุก
- ุฑุงุฌุน ุงูุชุนูููุงุช ูู ุงูููุฏ

---

## ๐ ุงูุชุฑุฎูุต

ูุฐุง ุงููุธุงู ุฌุฒุก ูู ูุดุฑูุน ูุธุงู ูุงุดูุฑ ุงููููู.
ุฌููุน ุงูุญููู ูุญููุธุฉ ยฉ 2024

---

**ุขุฎุฑ ุชุญุฏูุซ:** 2024-01-15
**ุงูุฅุตุฏุงุฑ:** 1.0.0 (Demo)
**ุงููุทูุฑ:** Kiro AI
